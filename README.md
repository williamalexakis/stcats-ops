# St. Catherine's CS Department Platform

An internal web platform that supports coordination, scheduling, and communications for the St. Catherine's CS department.

> [!IMPORTANT]
> All accounts require an invite code generated by an admin.

## Features

- **Announcements & Chat** – Send messages and department-wide notices.
- **Role Management** – Promote, demote, or remove users through the members view.
- **Scheduling System** – Manage courses, classrooms, and time slots, then export filtered schedules as `.csv` files.
- **Code Editor** – Run Python code in-browser; import `.py` files and export current code.
- **Audit Trail** – Every POST request and admin action is logged and reviewable.

## Localhost Setup

### Prerequisites

- Python 3.11+
- A database connection string (SQLite or PostgreSQL).

### Setup

```bash
git clone git@github.com:<org>/stcats-cs.git
cd stcats-cs
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

Create a `.env` file with the following configuration:
```bash
DEBUG=True                            # Set to False in production
SECRET_KEY=change-me                  # Provide a unique secret in production
DATABASE_URL=sqlite:///db.sqlite3     # Or e.g. postgres://user:pass@localhost:5432/stcats for PostgreSQL
ALLOWED_HOSTS=127.0.0.1,localhost
CSRF_TRUSTED_ORIGINS=http://127.0.0.1:8000,http://localhost:8000
```

```bash
python manage.py migrate
python manage.py seed_groups
python manage.py createsuperuser
python manage.py runserver
```

Then visit <http://127.0.0.1:8000> and log in with your superuser credentials.

## Management Commands

| Command | Purpose |
| --- | --- |
| `python manage.py seed_groups` | Ensure the `teacher` and `admin` groups exist; safe to run multiple times. |
| `python manage.py cleanup_invites` | Remove expired or fully consumed invite codes. |
| `python manage.py cleanup_schedule` | Remove finished schedule entries. |
| `python manage.py test` | Run the Django unit test suite. |
