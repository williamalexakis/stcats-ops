{% extends "base.html" %}

{% block title %}Edit Schedule Entry - CS Dept Platform{% endblock %}

{% block content %}

<div class="page-subheader">
    <a href="{% url 'scheduler' %}" class="back-link">
        <i class="fa-solid fa-arrow-left"></i> Back to Scheduler
    </a>

    <h2 class="page-subheader__title">Edit Schedule Entry</h2>
</div>

<div class="card">
    <form method="post" class="form-grid">

        {% csrf_token %}

        <div class="form-grid-two">
            <div>
                <label for="teacher" class="field-label">
                    <i class="fa-solid fa-chalkboard-user"></i> Teacher
                </label>

                <select
                    id="teacher"
                    name="teacher"
                    required
                    class="select-control"
                >
                    <option value="">Select teacher...</option>

                    {% for teacher in teachers %}

                        <option value="{{ teacher.id }}" {% if teacher.id == entry.teacher.id %}selected{% endif %}>{{ teacher.username }}</option>

                    {% endfor %}

                </select>
            </div>

            <div>
                <label for="classroom" class="field-label">
                    <i class="fa-solid fa-door-open"></i> Classroom
                </label>

                <select
                    id="classroom"
                    name="classroom"
                    required
                    class="select-control"
                >
                    <option value="">Select classroom...</option>

                    {% for classroom in classrooms %}

                        <option value="{{ classroom.id }}" {% if classroom.id == entry.classroom.id %}selected{% endif %}>{{ classroom.display_name }}</option>

                    {% endfor %}
                </select>
            </div>
        </div>

        <div class="form-grid-two">
            <div>
                <label for="subject" class="field-label">
                    <i class="fa-solid fa-book"></i> Subject
                </label>

                <select
                    id="subject"
                    name="subject"
                    required
                    class="select-control"
                >
                    <option value="">Select subject...</option>

                    {% for subject in subjects %}

                        <option value="{{ subject.id }}" {% if subject.id == entry.subject.id %}selected{% endif %}>{{ subject.display_name }}</option>

                    {% endfor %}
                </select>
            </div>

            <div>
                <label for="course" class="field-label">
                    <i class="fa-solid fa-graduation-cap"></i> Course
                </label>

                <select
                    id="course"
                    name="course"
                    required
                    class="select-control"
                >
                    <option value="">Select course...</option>

                    {% for course in courses %}

                        <option value="{{ course.id }}" {% if course.id == entry.course.id %}selected{% endif %}>{{ course.display_name }}</option>

                    {% endfor %}
                </select>
            </div>
        </div>

        <div>
            <label for="date" class="field-label">
                <i class="fa-solid fa-calendar-days"></i> Date
            </label>

            <input
                type="date"
                id="date"
                name="date"
                value="{{ entry.date|date:'Y-m-d' }}"
                required
                class="select-control"
            />
        </div>

        <div class="form-grid-two">
            <div>
                <label for="start_time" class="field-label">
                    <i class="fa-solid fa-clock"></i> Start Time
                </label>

                <input
                    type="time"
                    id="start_time"
                    name="start_time"
                    value="{{ entry.start_time|time:'H:i' }}"
                    required
                    class="select-control"
                />
            </div>

            <div>
                <label for="end_time" class="field-label">
                    <i class="fa-solid fa-clock"></i> End Time
                </label>

                <input
                    type="time"
                    id="end_time"
                    name="end_time"
                    value="{{ entry.end_time|time:'H:i' }}"
                    required
                    class="select-control"
                />
            </div>
        </div>

        <div class="action-buttons">
            <button type="submit" class="chat-submit">
                <i class="fa-solid fa-check"></i>

                Save Changes

            </button>

            <a href="{% url 'scheduler' %}" class="btn-outline">
                <i class="fa-solid fa-xmark"></i>

                Cancel

            </a>
        </div>
    </form>
</div>

{% endblock %}
