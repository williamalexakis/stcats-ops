<!-- Copyright © William Alexakis. All Rights Reserved. Use governed by LICENSE file. -->

{% extends "base.html" %}
{% load static %}

{% block title %}Code Editor • CS Dept Platform{% endblock %}

{% block content %}

<div class="page-header">
    <div class="page-header__group">
        <h1 class="page-header__title">Code Editor</h1>

        <div class="count-badge-wrapper">
            <span class="count-badge">
                <i class="fa-brands fa-python icon-leading"></i>

                Python

            </span>
        </div>
    </div>
</div>

<div class="card editor-page">
    <div class="editor-header">
        <div class="editor-actions">
            <button id="run-button" class="btn-run button-icon" type="button" title="Run code">
                <i class="fa-solid fa-play button-icon__icon"></i>

                Run

            </button>

            <button id="stop-button" class="btn-stop button-icon" type="button" title="Stop execution" disabled>
                <i class="fa-solid fa-stop button-icon__icon"></i>

                Stop

            </button>

            <button id="import-button"
                    type="button"
                    title="Import .py file"
                    class="btn-outline-info button-icon">
                <i class="fa-solid fa-file-arrow-up button-icon__icon"></i>

                Import

            </button>

            <button id="export-button"
                    type="button"
                    title="Download code as file"
                    class="btn-outline-success button-icon">
                <i class="fa-solid fa-file-arrow-down button-icon__icon"></i>

                Export

            </button>

            <div class="editor-hint button-icon">
                <i class="fa-solid fa-circle-info button-icon__icon"></i>

                Import supports UTF-8 Python files up to 200 KB.

            </div>
        </div>
    </div>

    <div class="editor-panels">
        <div class="editor-pane">
            <div id="code-editor" class="code-editor-instance" aria-label="Python code editor"></div>
        </div>

        <div class="output-pane">
            <div class="output-header">
                <span class="button-icon">
                    <i class="fa-solid fa-terminal button-icon__icon"></i>

                    Output

                </span>

                <span id="status-badge" class="status-badge status-idle">
                    <span class="status-dot"></span>

                    Idle

                </span>
            </div>

            <div id="output-area" class="output-area" role="region" aria-live="polite"></div>
        </div>
    </div>
</div>

<input type="file" id="file-input" accept=".py,.txt" class="hidden-input">
{{ initial_code|json_script:"initial-code-data" }}

{% endblock %}

{% block scripts %}

<script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js" referrerpolicy="no-referrer"></script>
<script src="{% static 'js/code_editor.js' %}"></script>

{% endblock %}
