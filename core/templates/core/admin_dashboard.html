{% extends "core/admin_base.html" %}

{% block title %}Admin Dashboard - CS Dept Platform{% endblock %}

{% block admin_content %}

<div class="section-header">
    <h1 class="section-header__title">Administration Dashboard</h1>
</div>

<div class="stats-grid">

    <div class="card stat-card stat-card--primary">
        <div class="stat-card__header">
            <div>
                <div class="stat-card__title">Total Users</div>

                <div class="stat-card__value">{{ total_users }}</div>
            </div>

            <div class="stat-card__icon stat-card__icon--info">
                <i class="fa-solid fa-users stat-card__icon-inner"></i>
            </div>
        </div>

        <div class="stat-card__meta">
            <i class="fa-solid fa-user-shield icon-admin"></i>

            {{ admin_count }} admin{{ admin_count|pluralize }} Â·

            <i class="fa-solid fa-chalkboard-user icon-teacher"></i>

            {{ teacher_count }} teacher{{ teacher_count|pluralize }}
        </div>
    </div>

    <div class="card stat-card stat-card--success">
        <div class="stat-card__header">
            <div>
                <div class="stat-card__title">Active Invites</div>

                <div class="stat-card__value">{{ active_invites }}</div>
            </div>

            <div class="stat-card__icon stat-card__icon--success">
                <i class="fa-solid fa-ticket stat-card__icon-inner"></i>
            </div>
        </div>

        <div class="stat-card__meta">

            {% if total_invite_uses > 0 %}

                <i class="fa-solid fa-arrow-up icon-success"></i>

                {{ total_invite_uses }} use{{ total_invite_uses|pluralize }} available

            {% else %}

                <span class="text-tertiary">No uses available</span>

            {% endif %}

        </div>
    </div>

    <div class="card stat-card stat-card--warning">
        <div class="stat-card__header">
            <div>
                <div class="stat-card__title">Schedule Entries</div>

                <div class="stat-card__value">{{ total_schedule_entries }}</div>
            </div>

            <div class="stat-card__icon stat-card__icon--warning">
                <i class="fa-solid fa-calendar-days stat-card__icon-inner"></i>
            </div>
        </div>
        <div class="stat-card__meta">

            {% if upcoming_entries > 0 %}

                <i class="fa-solid fa-clock icon-warning"></i>

                {{ upcoming_entries }} upcoming

            {% else %}

                <span class="text-tertiary">No upcoming entries</span>

            {% endif %}
        </div>
    </div>

    <div class="card stat-card stat-card--info">
        <div class="stat-card__header">
            <div>
                <div class="stat-card__title">Total Messages</div>

                <div class="stat-card__value">{{ total_messages }}</div>
            </div>

            <div class="stat-card__icon stat-card__icon--info">
                <i class="fa-solid fa-comment-dots stat-card__icon-inner"></i>
            </div>
        </div>
        <div class="stat-card__meta">

            {% if announcement_count > 0 %}

                <i class="fa-solid fa-bullhorn icon-teacher"></i>

                {{ announcement_count }} announcement{{ announcement_count|pluralize }}

            {% else %}

                <span class="text-tertiary">No announcements</span>

            {% endif %}
        </div>
    </div>
</div>

<div class="card quick-actions">
    <div class="quick-actions__header">
        <i class="fa-solid fa-bolt icon-teacher"></i>

        <h3 class="quick-actions__title">Quick Actions</h3>
    </div>

    <div class="tile-grid">
        {% if request.user.is_superuser %}

            <a href="/admin/"
               class="tile-link">
                <i class="fa-solid fa-server tile-link__icon"></i>

                <span class="tile-link__label">Access Backend</span>
            </a>

        {% endif %}

        <a href="{% url 'admin_invites' %}"
           class="tile-link">
            <i class="fa-solid fa-ticket tile-link__icon"></i>

            <span class="tile-link__label">Manage Invites</span>
        </a>

        <a href="{% url 'admin_scheduler_config' %}"
           class="tile-link">
            <i class="fa-solid fa-calendar-days tile-link__icon"></i>

            <span class="tile-link__label">Configure Schedule</span>
        </a>

        <a href="{% url 'admin_audit_logs' %}"
           class="tile-link">
            <i class="fa-solid fa-clipboard-list tile-link__icon"></i>

            <span class="tile-link__label">View Audit Logs</span>
        </a>
    </div>
</div>

{% endblock %}
